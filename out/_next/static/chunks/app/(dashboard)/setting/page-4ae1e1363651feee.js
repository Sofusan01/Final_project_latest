(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[697],{381:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(9946).A)("settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},646:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(9946).A)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},1154:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(9946).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},2933:(e,t,a)=>{Promise.resolve().then(a.bind(a,5240))},4616:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(9946).A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},5240:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>h});var s=a(5155),l=a(2115),n=a(1115),i=a(6104),r=a(1154),c=a(381),d=a(5339),m=a(646),u=a(7712),o=a(4616);let x=(0,a(9946).A)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);function h(){let[e,t]=(0,l.useState)(!1),[a,h]=(0,l.useState)(10),[p,g]=(0,l.useState)("00:00"),[b,f]=(0,l.useState)(!0),[y,j]=(0,l.useState)(!1),[N,v]=(0,l.useState)(null),[k,A]=(0,l.useState)(null);async function S(){try{j(!0),A(null),v(null);let t=(0,n.KR)(i.db,"setting/sync");await (0,n.hZ)(t,{log_enabled:e,log_interval_minutes:a,time_noti:p,updated_at:new Date().toISOString()}),v("Settings saved successfully!"),setTimeout(()=>v(null),3e3)}catch(e){e instanceof Error?A(e.message):A("An unknown error occurred while saving.")}finally{j(!1)}}(0,l.useEffect)(()=>{!async function(){try{let l=(0,n.KR)(i.db,"setting/sync"),r=await (0,n.Jt)(l);if(r.exists()){var e,a,s;let l=r.val();t(null!=(e=l.log_enabled)&&e),h(null!=(a=l.log_interval_minutes)?a:10),g(null!=(s=l.time_noti)?s:"09:00")}}catch(e){e instanceof Error?A(e.message):A("Failed to load settings.")}finally{f(!1)}}()},[]);let w=(e,t)=>{if(!e)return"00:00";let[a,s]=e.split(":").map(Number),l=new Date;l.setHours(a,s),l.setMinutes(l.getMinutes()+t);let n=String(l.getHours()).padStart(2,"0"),i=String(l.getMinutes()).padStart(2,"0");return"".concat(n,":").concat(i)};return b?(0,s.jsxs)("div",{className:"flex items-center justify-center p-8",children:[(0,s.jsx)(r.A,{className:"w-8 h-8 animate-spin text-neutral-400"}),(0,s.jsx)("span",{className:"ml-3 text-neutral-500",children:"Loading settings..."})]}):(0,s.jsxs)("div",{className:"w-full max-w-2xl mx-auto p-6 space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"bg-neutral-100 p-2 rounded-lg",children:(0,s.jsx)(c.A,{className:"w-6 h-6 text-neutral-600"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-heading",children:"System Settings"}),(0,s.jsx)("p",{className:"text-muted",children:"Configure sensor log collection and notifications."})]})]}),k&&(0,s.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4 flex items-center gap-2",children:[(0,s.jsx)(d.A,{className:"w-5 h-5 text-red-600"}),(0,s.jsx)("p",{className:"text-red-700 font-medium",children:k})]}),N&&(0,s.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-xl p-4 flex items-center gap-2",children:[(0,s.jsx)(m.A,{className:"w-5 h-5 text-green-600"}),(0,s.jsx)("span",{className:"text-green-700 font-medium",children:N})]}),(0,s.jsxs)("div",{className:"card p-6 space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 bg-neutral-50 rounded-xl",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-semibold text-heading",children:"Enable Automatic Log Collection"}),(0,s.jsx)("p",{className:"text-sm text-muted",children:"Automatically store sensor data."})]}),(0,s.jsx)("input",{type:"checkbox",checked:e,onChange:e=>t(e.target.checked),className:"toggle"})]}),(0,s.jsxs)("div",{className:"p-4 bg-neutral-50 rounded-xl",children:[(0,s.jsx)("h3",{className:"font-semibold text-heading mb-1",children:"Data Collection Frequency"}),(0,s.jsx)("p",{className:"text-sm text-muted mb-3",children:"Set interval for recording sensor data."}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("input",{type:"number",className:"input text-center w-20",value:a,min:1,max:120,onChange:e=>h(Number(e.target.value))}),(0,s.jsx)("span",{className:"text-neutral-500",children:"minutes"})]})]}),(0,s.jsxs)("div",{className:"p-4 bg-neutral-50 rounded-xl",children:[(0,s.jsx)("h3",{className:"font-semibold text-heading mb-1",children:"Daily Notification Time"}),(0,s.jsx)("p",{className:"text-sm text-muted mb-3",children:"Set time for daily sensor report (24-hour format)."}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("input",{type:"time",className:"input flex-1",value:p,onChange:e=>g(e.target.value)}),(0,s.jsx)("button",{onClick:()=>g(w(p,-30)),className:"btn-icon",children:(0,s.jsx)(u.A,{className:"w-4 h-4"})}),(0,s.jsx)("button",{onClick:()=>g(w(p,30)),className:"btn-icon",children:(0,s.jsx)(o.A,{className:"w-4 h-4"})})]})]})]}),(0,s.jsx)("div",{className:"flex justify-center pt-4",children:(0,s.jsx)("button",{onClick:S,disabled:y,className:"btn-primary px-8 py-3 text-lg font-semibold flex items-center justify-center",children:y?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.A,{className:"w-5 h-5 animate-spin"}),(0,s.jsx)("span",{className:"ml-2",children:"Saving..."})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(x,{className:"w-5 h-5"}),(0,s.jsx)("span",{className:"ml-2",children:"Save All Settings"})]})})})]})}},5339:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(9946).A)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},6104:(e,t,a)=>{"use strict";a.d(t,{db:()=>r});var s=a(3915),l=a(6203),n=a(1115);let i=(0,s.Dk)().length?(0,s.Dk)()[0]:(0,s.Wp)({apiKey:"AIzaSyDRn8HHi_a4SAgFDAOvm0-ks_IGVfhCEZ0",authDomain:"dashboard-4de68.firebaseapp.com",databaseURL:"https://dashboard-4de68-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"dashboard-4de68",storageBucket:"dashboard-4de68.firebasestorage.app",messagingSenderId:"759947044425",appId:"1:759947044425:web:6db0a728a2b831d26f8198",measurementId:"G-RRNL8VHNL4"});(0,l.xI)(i);let r=(0,n.C3)(i)},7712:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(9946).A)("minus",[["path",{d:"M5 12h14",key:"1ays0h"}]])}},e=>{var t=t=>e(e.s=t);e.O(0,[507,163,216,441,684,358],()=>t(2933)),_N_E=e.O()}]);